<igc-dockmanager #dock class="light-theme dock-m-position" [layout]="docLayout">
  <div slot="grid" igxOverlayOutlet style="height: 100%">
    <igx-grid #grid columnSelection="multiple" [moving]="true" igxChartIntegration igxConditionalFormatting igxContextMenu
      primaryKey="id" [data]="data" [allowFiltering]="true" [filterMode]="'excelStyleFilter'">
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="id" [hidden]="true"></igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="category" [width]="'110px'"></igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="type" [filterable]="false" [width]="'130px'"></igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="country"  [width]="'100px'"></igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="price" dataType="number" [width]="'120px'" >
        <ng-template igxCell let-cell="cell">
          <div class="finjs-icons">
            <span>{{cell.value | currency:'USD':'symbol':'1.4-4'}}</span>
          </div>
        </ng-template>
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="startY" [width]="'100px'" dataType="number" [formatter]="formatCurrency">
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="startYDiff" dataType="number" [width]="'120px'" >
        <ng-template igxCell let-cell="cell">
          <div class="finjs-icons">
            <span>{{cell.value | number:'1.4-4'}}%</span>
          </div>
        </ng-template>
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="buy" [width]="'100px'" dataType="number" [formatter]="formatCurrency" >
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="buyDiff" dataType="number" [width]="'120px'" >
        <ng-template igxCell let-cell="cell">
          <div class="finjs-icons">
            <span>{{cell.value | number:'1.4-4'}}%</span>
          </div>
        </ng-template>
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="highY" [width]="'100px'" dataType="number" [formatter]="formatCurrency"
        >
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="highYDiff" [width]="'120px'" dataType="number" [formatter]="formatCurrency"
        >
        <ng-template igxCell let-cell="cell">
          <div class="finjs-icons">
            <span>{{cell.value | currency:'USD':'symbol':'1.4-4'}}</span>
          </div>
        </ng-template>
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="openPrice" dataType="number" [formatter]="formatCurrency"
        [width]="'130px'">
        <ng-template igxCell let-cell="cell">
          <div class="finjs-icons">
            <span>{{cell.value | currency:'USD':'symbol':'1.4-4'}}</span>
          </div>
        </ng-template>
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="openPriceDiff" dataType="number" [width]="'140px'" >
        <ng-template igxCell let-cell="cell">
          <div class="finjs-icons">
            <span>{{cell.value | number:'1.4-4'}}%</span>
          </div>
        </ng-template>
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="lowY" [width]="'100px'" dataType="number" [formatter]="formatCurrency">
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="lowYDiff" dataType="number" [width]="'120px'" >
        <ng-template igxCell let-cell="cell">
          <div class="finjs-icons">
            <span>{{cell.value | number:'1.4-4'}}%</span>
          </div>
        </ng-template>
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="highD" [width]="'100px'" dataType="number" [headerClasses]="'headerAlignSyle'"
        [formatter]="formatCurrency">
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="highDDiff" dataType="number" [width]="'120px'" >
        <ng-template igxCell let-cell="cell">
          <div class="finjs-icons">
            <span>{{cell.value | number:'1.4-4'}}%</span>
          </div>
        </ng-template>
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="lowD" [width]="'100px'" dataType="number" [formatter]="formatCurrency">
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="lowDDiff" dataType="number" [width]="'120px'" >
        <ng-template igxCell let-cell="cell">
          <div class="finjs-icons">
            <span>{{cell.value | number:'1.4-4'}}%</span>
          </div>
        </ng-template>
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="sell" [width]="'110px'" dataType="number" [formatter]="formatCurrency" >
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="sellDiff" dataType="number" [width]="'120px'" >
        <ng-template igxCell let-cell="cell">
          <div class="finjs-icons">
            <span>{{cell.value | number:'1.4-4'}}%</span>
          </div>
        </ng-template>
      </igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="region"></igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="contract"></igx-column>
      <igx-column [sortable]="true"  [disablePinning]="true" [disableHiding]="true" field="settlement" [width]="'150px'" ></igx-column>
    </igx-grid>
  </div>

  <div slot="chart-types-content" class="chart-types-container">
    @for (chartType of chartTypes; track chartType) {
      <div>
        @if ((allCharts |filterType:chartType).length > 0) {
          <div class="wrapper">
            <div>{{chartType | titlecase}} Chart</div>
            <div class="types-section">
              @for (chart of (allCharts | filterType: chartType); track chart; let i = $index) {
                <div
                  (click)="createChart(chart)"
                  title="{{chart}}"
                  [ngClass]="{'disabled': availableCharts.indexOf(chart) === -1, 'selected': chart | hastDuplicateLayouts: dock.layout: selectedCharts}"
                  style="width: 60px; margin-right: 20px; cursor: pointer; position: relative;">
                  <img src="assets/images/svg/charts/{{chart}}.svg" />
                  @if (selectedCharts[chart]) {
                    <igx-badge icon="check"></igx-badge>
                  }
                </div>
              }
            </div>
            <igx-divider></igx-divider>
          </div>
        }
      </div>
    }
  </div>

  @for (chart of allCharts; track chart) {
    <app-dock-slot  [id]="chart" >
    </app-dock-slot>
  }
</igc-dockmanager>

<ng-template #template>
    <span>Incompatible data</span>
</ng-template>
